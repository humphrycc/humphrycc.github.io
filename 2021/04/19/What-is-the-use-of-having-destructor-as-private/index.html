<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>What is the use of having destructor as private? | HUCHI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;631783&#x2F;what-is-the-use-of-having-destructor-as-private  Basically, any time you want some other class to be responsible for the life cycle of your class’ objects,">
<meta property="og:type" content="article">
<meta property="og:title" content="What is the use of having destructor as private?">
<meta property="og:url" content="https://humphrycc.github.io/2021/04/19/What-is-the-use-of-having-destructor-as-private/index.html">
<meta property="og:site_name" content="HUCHI">
<meta property="og:description" content="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;631783&#x2F;what-is-the-use-of-having-destructor-as-private  Basically, any time you want some other class to be responsible for the life cycle of your class’ objects,">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-04-19T13:12:57.000Z">
<meta property="article:modified_time" content="2021-04-27T05:45:50.065Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="c++">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="HUCHI" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">HUCHI</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://humphrycc.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-What-is-the-use-of-having-destructor-as-private" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/19/What-is-the-use-of-having-destructor-as-private/" class="article-date">
  <time class="dt-published" datetime="2021-04-19T13:12:57.000Z" itemprop="datePublished">2021-04-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      What is the use of having destructor as private?
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/631783/what-is-the-use-of-having-destructor-as-private">https://stackoverflow.com/questions/631783/what-is-the-use-of-having-destructor-as-private</a></p>
</blockquote>
<p>Basically, any time you want some other class to be responsible for the life cycle of your class’ objects, or you have reason to prevent the destruction of an object, you can make the destructor <code>private</code>.</p>
<p>For instance, if you’re doing some sort of reference counting thing, you can have the object (or manager that has been <code>friend</code>ed) responsible for counting the number of references to itself and delete it when the number hits zero. A <code>private</code> dtor would prevent anybody else from deleting it when there were still references to it.</p>
<p>For another instance, what if you have an object that has a manager (or itself) that may destroy it or may decline to destroy it depending on other conditions in the program, such as a database connection being open or a file being written. You could have a <code>request_delete</code> method in the class or the manager that will check that condition and it will either delete or decline, and return a status telling you what it did. That’s far more flexible that just calling “delete”.</p>
<p>Such an object <strong>can only be created on the stack in the scope of a <code>friend</code> or itself</strong>. Additionally it cannot ba a static or global object. And deletion has to be done via a <code>friend</code> or a member. A product may use a single Object hierarchy and a custom memory-manager – such scenarios may use a <code>private</code> dtor. <strong>Such an object can be created on the stack by using placement <code>new</code>.</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">a</span> &#123;</span></span><br><span class="line">    ~<span class="built_in">a</span>() &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="keyword">void</span> <span class="title">delete_a</span><span class="params">(a* p)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delete_a</span><span class="params">(a* p)</span>  </span>&#123;</span><br><span class="line">    <span class="keyword">delete</span> p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    a *p = <span class="keyword">new</span> a;</span><br><span class="line">    <span class="built_in">delete_a</span>(p);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example from The C++ Programming Language 17.2.4 Calling Constructors and Destructors.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Nonlocal</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123; <span class="keyword">this</span>−&gt; ̃<span class="built_in">Nonlocal</span>(); &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">     ̃<span class="built_in">Nonlocal</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">user</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Nonlocal x;            <span class="comment">// error: cannot destory a Nonlocal</span></span><br><span class="line">    X* p = <span class="keyword">new</span> Nonlocal;   <span class="comment">// OK</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">delete</span> p;              <span class="comment">// error: cannot destroy a Nonlocal</span></span><br><span class="line">	p.<span class="built_in">destroy</span>();           <span class="comment">// OK</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://humphrycc.github.io/2021/04/19/What-is-the-use-of-having-destructor-as-private/" data-id="cknzlw0l70005gsos8vt18tcx" data-title="What is the use of having destructor as private?" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/" rel="tag">c++</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/04/19/When-to-use-virtual-destructors/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          When to use virtual destructors?
        
      </div>
    </a>
  
  
    <a href="/2021/04/19/What-uses-are-there-for-placement-new/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">What uses are there for &#34;placement new&#34;?</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/" rel="tag">c++</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/c/" style="font-size: 10px;">c++</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/04/27/Do-we-need-User-defined-literal/">Do we need User-defined literal?</a>
          </li>
        
          <li>
            <a href="/2021/04/19/Virtuality/">Virtuality</a>
          </li>
        
          <li>
            <a href="/2021/04/19/When-to-use-virtual-destructors/">When to use virtual destructors?</a>
          </li>
        
          <li>
            <a href="/2021/04/19/What-is-the-use-of-having-destructor-as-private/">What is the use of having destructor as private?</a>
          </li>
        
          <li>
            <a href="/2021/04/19/What-uses-are-there-for-placement-new/">What uses are there for &#34;placement new&#34;?</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>